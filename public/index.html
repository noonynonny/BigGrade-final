<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>BigGrade</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      position: relative;
    }
    
    iframe {
      width: 100%;
      height: 100%;
      border: none;
      display: block;
    }
    
    /* Dynamic overlay that only shows when Base44 branding is detected */
    .branding-cover {
      position: fixed;
      bottom: 0;
      right: 0;
      width: 250px;
      height: 100px;
      background: linear-gradient(to top, white 0%, white 70%, transparent 100%);
      z-index: 9999;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .branding-cover.visible {
      opacity: 1;
    }
  </style>
</head>
<body>
  <iframe 
    id="app-iframe"
    src="https://biggrade0.base44.app"
    sandbox="allow-same-origin allow-scripts allow-forms allow-popups allow-modals allow-storage-access-by-user-activation"
    allow="camera; microphone; clipboard-read; clipboard-write; fullscreen; payment; geolocation; storage-access"
    allowfullscreen
  ></iframe>
  
  <!-- Dynamic overlay that appears only when Base44 branding is detected -->
  <div class="branding-cover" id="branding-cover"></div>
  
  <script>
    const iframe = document.getElementById('app-iframe');
    const cover = document.getElementById('branding-cover');
    
    let hideTimer = null;
    let brandingCheckInterval = null;
    
    // Try to inject CSS to prevent Base44 branding from appearing
    iframe.addEventListener('load', () => {
      console.log('Iframe loaded');
      
      try {
        const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
        
        // Inject CSS immediately to prevent branding from showing
        const style = iframeDoc.createElement('style');
        style.textContent = `
          /* Prevent Base44 branding from appearing */
          [class*="base44"],
          [id*="base44"],
          [class*="Base44"],
          [id*="Base44"],
          a[href*="base44.app"],
          a[href*="base44.com"],
          button[class*="edit"],
          button[class*="remix"],
          div[class*="branding"],
          div[class*="watermark"],
          .powered-by,
          .made-with {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            pointer-events: none !important;
          }
        `;
        iframeDoc.head.appendChild(style);
        
        console.log('âœ… Injected CSS to prevent Base44 branding');
        
        // Check if branding still appears despite CSS injection
        setTimeout(() => {
          checkForBranding(iframeDoc);
        }, 1000);
        
      } catch (error) {
        // Cross-origin - can't inject CSS
        console.log('Cannot inject CSS (cross-origin) - will use overlay if needed');
        
        // Start monitoring for branding
        startBrandingMonitoring();
      }
    });
    
    function startBrandingMonitoring() {
      // Check for branding after a delay (Base44 typically loads branding after page load)
      setTimeout(() => {
        // Show overlay preemptively (Base44 branding usually appears)
        showCoverWithTimer();
      }, 3000);
    }
    
    function checkForBranding(iframeDoc) {
      try {
        // Look for Base44 branding elements
        const brandingElements = iframeDoc.querySelectorAll(
          '[class*="base44"], [id*="base44"], ' +
          '[class*="Base44"], [id*="Base44"], ' +
          'a[href*="base44"], button[class*="edit"], ' +
          'button[class*="remix"]'
        );
        
        if (brandingElements.length > 0) {
          console.log('Base44 branding detected despite CSS injection');
          showCoverWithTimer();
        } else {
          console.log('No Base44 branding detected - CSS injection successful');
        }
      } catch (error) {
        // Can't access iframe - assume branding might be present
        console.log('Cannot check for branding (cross-origin)');
        showCoverWithTimer();
      }
    }
    
    function showCoverWithTimer() {
      // Clear any existing timer
      if (hideTimer) {
        clearTimeout(hideTimer);
      }
      
      // Show the cover
      cover.classList.add('visible');
      console.log('Showing branding cover');
      
      // Hide after 15 seconds
      hideTimer = setTimeout(() => {
        cover.classList.remove('visible');
        console.log('Hiding branding cover after 15 seconds');
      }, 15000);
    }
    
    // Clean up on page unload
    window.addEventListener('beforeunload', () => {
      if (hideTimer) {
        clearTimeout(hideTimer);
      }
      if (brandingCheckInterval) {
        clearInterval(brandingCheckInterval);
      }
    });
  </script>
</body>
</html>
